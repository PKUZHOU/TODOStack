<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŸ¥çœ‹æ ˆé¡¶è¯¦æƒ…åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }
        .code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        .highlight {
            background: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            border-left: 4px solid #ffc107;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ” æŸ¥çœ‹æ ˆé¡¶è¯¦æƒ…åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="section">
        <h2>åŠŸèƒ½è¯´æ˜</h2>
        <p>ç°åœ¨Chromeæ’ä»¶ä¸­çš„"æŸ¥çœ‹æ ˆé¡¶"æŒ‰é’®åŠŸèƒ½å·²å‡çº§ï¼Œç‚¹å‡»åä¼šï¼š</p>
        <ul>
            <li>è‡ªåŠ¨æ‰“å¼€ä¸»åº”ç”¨é¡µé¢</li>
            <li>å®šä½åˆ°æ ˆé¡¶ä»»åŠ¡</li>
            <li>è‡ªåŠ¨å±•å¼€æ ˆé¡¶ä»»åŠ¡çš„è¯¦ç»†ä¿¡æ¯</li>
            <li>é«˜äº®æ˜¾ç¤ºè¯¥ä»»åŠ¡3ç§’é’Ÿ</li>
        </ul>
    </div>

    <div class="section">
        <h2>æµ‹è¯•æ­¥éª¤</h2>
        
        <div class="step">
            <h3>æ­¥éª¤1ï¼šå‡†å¤‡æµ‹è¯•æ•°æ®</h3>
            <p>åœ¨ä¸»åº”ç”¨ä¸­æ·»åŠ ä¸€äº›ä»»åŠ¡ï¼Œç¡®ä¿æ ˆä¸­æœ‰ä»»åŠ¡å­˜åœ¨</p>
            <button onclick="addTestTasks()">æ·»åŠ æµ‹è¯•ä»»åŠ¡</button>
        </div>

        <div class="step">
            <h3>æ­¥éª¤2ï¼šæ‰“å¼€Chromeæ’ä»¶</h3>
            <p>ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„TODOStackæ’ä»¶å›¾æ ‡</p>
        </div>

        <div class="step">
            <h3>æ­¥éª¤3ï¼šç‚¹å‡»æŸ¥çœ‹æ ˆé¡¶</h3>
            <p>åœ¨æ’ä»¶ä¸­æ‰¾åˆ°è“è‰²çš„"æŸ¥çœ‹æ ˆé¡¶"æŒ‰é’®ï¼ˆå›¾æ ‡ä¸º ğŸ‘ï¸ï¼‰ï¼Œç‚¹å‡»å®ƒ</p>
        </div>

        <div class="step">
            <h3>æ­¥éª¤4ï¼šéªŒè¯æ•ˆæœ</h3>
            <p>åº”è¯¥çœ‹åˆ°ï¼š</p>
            <ul>
                <li>è‡ªåŠ¨æ‰“å¼€äº†ä¸»åº”ç”¨é¡µé¢</li>
                <li>é¡µé¢æ»šåŠ¨åˆ°æ ˆé¡¶ä»»åŠ¡ä½ç½®</li>
                <li>æ ˆé¡¶ä»»åŠ¡è¢«è“è‰²è¾¹æ¡†é«˜äº®æ˜¾ç¤º</li>
                <li>æ ˆé¡¶ä»»åŠ¡çš„è¯¦ç»†ä¿¡æ¯è‡ªåŠ¨å±•å¼€</li>
                <li>æ˜¾ç¤ºæˆåŠŸé€šçŸ¥æ¶ˆæ¯</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>æŠ€æœ¯å®ç°</h2>
        
        <h3>æ’ä»¶ç«¯å®ç°ï¼š</h3>
        <div class="code">
// peekæŒ‰é’®ç°åœ¨ç›´æ¥è°ƒç”¨æŸ¥çœ‹æ ˆé¡¶è¯¦æƒ…åŠŸèƒ½
this.peekBtn.addEventListener('click', () => this.viewTopDetail());

// æŸ¥çœ‹æ ˆé¡¶è¯¦æƒ…
viewTopDetail() {
    const topTask = this.stack[this.stack.length - 1];
    const taskId = topTask.id;
    
    // æ„å»ºURLï¼ŒåŒ…å«ä»»åŠ¡IDå‚æ•°
    const baseUrl = chrome.runtime.getURL('index.html');
    const detailUrl = `${baseUrl}?taskId=${taskId}&action=viewDetail`;
    
    // æ‰“å¼€æ–°æ ‡ç­¾é¡µå¹¶å±•å¼€ä»»åŠ¡è¯¦æƒ…
    chrome.tabs.create({ url: detailUrl });
}
        </div>

        <h3>ä¸»åº”ç”¨ç«¯å®ç°ï¼š</h3>
        <div class="code">
// å¤„ç†URLå‚æ•°
handleUrlParameters() {
    const urlParams = new URLSearchParams(window.location.search);
    const taskId = urlParams.get('taskId');
    const action = urlParams.get('action');

    if (taskId && action === 'viewDetail') {
        setTimeout(() => {
            this.openTaskDetailFromUrl(parseInt(taskId));
        }, 500);
    }
}
        </div>
    </div>

    <div class="section">
        <h2>æŒ‰é’®æ ·å¼</h2>
        <p>å‡çº§åçš„"æŸ¥çœ‹æ ˆé¡¶"æŒ‰é’®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
        <ul>
            <li>è“è‰²æ¸å˜èƒŒæ™¯ (#17a2b8 åˆ° #6f42c1)</li>
            <li>çœ¼ç›å›¾æ ‡ (fas fa-eye)</li>
            <li>æ‚¬åœæ—¶æœ‰é˜´å½±æ•ˆæœ</li>
            <li>å½“æ ˆä¸ºç©ºæ—¶è‡ªåŠ¨ç¦ç”¨</li>
            <li>åŠŸèƒ½ä»ç®€å•æŸ¥çœ‹å‡çº§ä¸ºæ‰“å¼€è¯¦æƒ…é¡µé¢</li>
        </ul>
    </div>

    <div class="highlight">
        <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
        <ul>
            <li>ç¡®ä¿Chromeæ’ä»¶å·²æ­£ç¡®å®‰è£…å¹¶åŠ è½½</li>
            <li>æ’ä»¶éœ€è¦æœ‰åˆ›å»ºæ–°æ ‡ç­¾é¡µçš„æƒé™</li>
            <li>ä¸»åº”ç”¨å’Œæ’ä»¶çš„æ•°æ®å·²åŒæ­¥</li>
            <li>æ ˆä¸­å¿…é¡»æœ‰ä»»åŠ¡æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½</li>
        </ul>
    </div>

    <script>
        function addTestTasks() {
            // è·å–ç°æœ‰æ•°æ®
            let data = {
                stack: [],
                completedTasks: [],
                todayTaskCount: 0
            };
            
            const existing = localStorage.getItem('todostack_data');
            if (existing) {
                try {
                    data = JSON.parse(existing);
                } catch (error) {
                    console.error('è§£æç°æœ‰æ•°æ®å¤±è´¥:', error);
                }
            }
            
            // æ·»åŠ æµ‹è¯•ä»»åŠ¡
            const testTasks = [
                {
                    id: Date.now() + 1,
                    title: 'å®Œæˆé¡¹ç›®æ–‡æ¡£',
                    description: '# é¡¹ç›®æ–‡æ¡£\n\néœ€è¦å®Œæˆä»¥ä¸‹å†…å®¹ï¼š\n- APIæ–‡æ¡£\n- ç”¨æˆ·æ‰‹å†Œ\n- éƒ¨ç½²æŒ‡å—',
                    priority: 'high',
                    tags: ['æ–‡æ¡£', 'é¡¹ç›®'],
                    progress: 30,
                    progressHistory: [],
                    timestamp: new Date().toISOString(),
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    url: 'https://github.com/example/project'
                },
                {
                    id: Date.now() + 2,
                    title: 'ä»£ç å®¡æŸ¥',
                    description: 'å®¡æŸ¥æ–°åŠŸèƒ½çš„ä»£ç å®ç°',
                    priority: 'medium',
                    tags: ['ä»£ç ', 'å®¡æŸ¥'],
                    progress: 0,
                    progressHistory: [],
                    timestamp: new Date().toISOString()
                },
                {
                    id: Date.now() + 3,
                    title: 'ä¼šè®®å‡†å¤‡',
                    description: 'å‡†å¤‡æ˜å¤©çš„é¡¹ç›®ä¼šè®®ææ–™',
                    priority: 'urgent',
                    tags: ['ä¼šè®®'],
                    progress: 80,
                    progressHistory: [],
                    timestamp: new Date().toISOString()
                }
            ];
            
            // æ·»åŠ åˆ°æ ˆä¸­
            data.stack.push(...testTasks);
            data.todayTaskCount = (data.todayTaskCount || 0) + testTasks.length;
            data.lastUpdated = new Date().toISOString();
            
            // ä¿å­˜æ•°æ®
            localStorage.setItem('todostack_data', JSON.stringify(data));
            
            alert(`å·²æ·»åŠ ${testTasks.length}ä¸ªæµ‹è¯•ä»»åŠ¡ï¼\nç°åœ¨å¯ä»¥æµ‹è¯•"æŸ¥çœ‹æ ˆé¡¶è¯¦æƒ…"åŠŸèƒ½äº†ã€‚`);
        }
        
        // æ˜¾ç¤ºå½“å‰æ ˆé¡¶ä»»åŠ¡ä¿¡æ¯
        function showTopTask() {
            const data = localStorage.getItem('todostack_data');
            if (data) {
                try {
                    const parsed = JSON.parse(data);
                    if (parsed.stack && parsed.stack.length > 0) {
                        const topTask = parsed.stack[parsed.stack.length - 1];
                        alert(`å½“å‰æ ˆé¡¶ä»»åŠ¡ï¼š\næ ‡é¢˜ï¼š${topTask.title}\nä¼˜å…ˆçº§ï¼š${topTask.priority}\nIDï¼š${topTask.id}`);
                    } else {
                        alert('æ ˆä¸ºç©ºï¼Œæ²¡æœ‰ä»»åŠ¡');
                    }
                } catch (error) {
                    alert('æ•°æ®è§£æé”™è¯¯');
                }
            } else {
                alert('æ²¡æœ‰æ‰¾åˆ°æ•°æ®');
            }
        }
    </script>
    
    <div class="section">
        <h2>å¿«é€Ÿæ“ä½œ</h2>
        <button onclick="showTopTask()">æŸ¥çœ‹å½“å‰æ ˆé¡¶ä»»åŠ¡</button>
        <button onclick="window.open('index.html', '_blank')">æ‰“å¼€ä¸»åº”ç”¨</button>
        <button onclick="localStorage.removeItem('todostack_data'); alert('æ•°æ®å·²æ¸…ç©º')">æ¸…ç©ºæ•°æ®</button>
    </div>
</body>
</html> 